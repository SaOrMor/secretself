(this["webpackJsonpget-scripts"]=this["webpackJsonpget-scripts"]||[]).push([[0],{38:function(t,e,n){},61:function(t,e,n){},62:function(t,e,n){},63:function(t,e,n){},64:function(t,e,n){"use strict";n.r(e);var a=n(0),s=n(1),o=n.n(s),c=n(31),r=n.n(c),i=n(8),u=n(2),l=n(3),h=n(5),p=n(4),j=(n(38),n(6)),d=n(15),b=n(14),m=n.n(b),g=new(function(){function t(){Object(u.a)(this,t),this.auth=m.a.create({baseURL:"https://yoursecretself.herokuapp.com",withCredentials:!0})}return Object(l.a)(t,[{key:"signup",value:function(t,e){return this.auth.post("/auth/signup",{email:t,password:e}).then((function(t){return t.data}))}},{key:"login",value:function(t,e){return this.auth.post("/auth/login",{email:t,password:e}).then((function(t){return t.data}))}},{key:"logout",value:function(){return this.auth.get("/auth/logout",{}).then((function(t){return t.data}))}},{key:"me",value:function(){return this.auth.get("/auth/me").then((function(t){return t.data}))}}]),t}()),O=o.a.createContext(),f=O.Consumer,x=O.Provider,v=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={isLoggedIn:!1,isLoading:!0,user:null},t.signup=function(e,n){g.signup(e,n).then((function(e){return t.setState({isLoggedIn:!0,user:e})})).catch((function(e){t.setState({isLoggedIn:!1,user:null})}))},t.login=function(e,n){g.login(e,n).then((function(e){return t.setState({isLoggedIn:!0,user:e})})).catch((function(e){t.setState({isLoggedIn:!1,user:null})}))},t.logout=function(){g.logout().then((function(){return t.setState({isLoggedIn:!1,user:null})})).catch((function(t){return console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var t=this;g.me().then((function(e){return t.setState({isLoggedIn:!0,user:e,isLoading:!1})})).catch((function(e){return t.setState({isLoggedIn:!1,user:null,isLoading:!1})}))}},{key:"render",value:function(){var t=this.state,e=t.isLoggedIn,n=t.isLoading,s=t.user,o=this.signup,c=this.login,r=this.logout;return n?Object(a.jsx)("p",{children:"Loading"}):Object(a.jsx)(x,{value:{isLoggedIn:e,isLoading:n,user:s,signup:o,login:c,logout:r},children:this.props.children})}}]),n}(o.a.Component),y=function(t){return function(e){Object(h.a)(s,e);var n=Object(p.a)(s);function s(){return Object(u.a)(this,s),n.apply(this,arguments)}return Object(l.a)(s,[{key:"render",value:function(){var e=this;return Object(a.jsx)(f,{children:function(n){var s=n.isLoggedIn,o=n.isLoading,c=n.user,r=n.signup,i=n.login,u=n.logout;return Object(a.jsx)(t,Object(d.a)(Object(d.a)({},e.props),{},{isLoggedIn:s,isLoading:o,user:c,signup:r,login:i,logout:u}))}})}}]),s}(o.a.Component)},C=y(function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("nav",{className:"navbar",children:[Object(a.jsx)(i.b,{to:"/",id:"home-btn",children:Object(a.jsx)("img",{className:"logo",src:"https://insegreto.com/svg/new-logo.svg",alt:"logo"})}),Object(a.jsx)("h1",{className:"secretSelf",children:" Your Secret Self"}),this.props.isLoggedIn?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("button",{className:"navbar-button",onClick:this.props.logout,children:"Logout"})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(i.b,{to:"/signup",children:[Object(a.jsx)("button",{className:"navbar-button",children:"Sign Up"})," "]})})]})}}]),n}(s.Component)),S=y(function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("footer",{className:"footer",children:Object(a.jsx)("h3",{children:"Do you have any question? Contact me at: sall.morise@gmail.com"})})}}]),n}(s.Component)),w=(n(61),n(12)),k=(n(62),function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={text:""},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state.text;m.a.post("".concat("https://yoursecretself.herokuapp.com","/api/post"),{text:n},{withCredentials:!0}).then((function(){t.props.getAllSecret(),t.props.showForm(),t.setState({text:"",image:""})})).catch((function(t){return console.log(t)}))},t.handleInput=function(e){var n=e.target,a=n.name,s=n.value;t.setState(Object(w.a)({},a,s))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"createPost",children:Object(a.jsxs)("form",{className:"postForm",onSubmit:this.handleFormSubmit,children:[Object(a.jsx)("textarea",{className:"areaCre",type:"text",name:"text",placeholder:"What you have in mind?",onChange:this.handleInput,value:this.state.text}),Object(a.jsx)("button",{className:"subBut",type:"submit",children:"Send text"})]})})}}]),n}(s.Component)),L=y(function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={listOfSecrets:[],showCreatePost:!1},t.getAllSecret=function(){m.a.get("".concat("https://yoursecretself.herokuapp.com","/api/post")).then((function(e){t.setState({listOfSecrets:e.data})})).catch((function(t){return console.log(t)}))},t.showForm=function(){t.setState({showCreatePost:!t.state.showCreatePost})},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getAllSecret()}},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"coloredBack",children:this.state.showCreatePost?Object(a.jsx)("div",{className:"wholePage",children:Object(a.jsx)(k,{getAllSecret:this.getAllSecret,showForm:this.showForm})}):Object(a.jsx)("button",{onClick:this.showForm,className:"moreButton",children:" + "})}),Object(a.jsx)("h3",{className:"paragraph",children:" Tell your secret to everyOne and to no one."}),Object(a.jsx)("div",{className:"post-cont",children:this.state.listOfSecrets.reverse().map((function(t){return Object(a.jsxs)("div",{className:"square",children:[Object(a.jsxs)("p",{className:"secret-message",children:[" ",t.text]}),Object(a.jsx)(i.c,{to:"/api/post/"+t._id,children:Object(a.jsx)("button",{className:"commButt",children:" Comment"})})]})}))})]})}}]),n}(s.Component)),N=y(function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={email:"",password:""},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state,a=n.email,s=n.password;t.props.signup(a,s)},t.handleChange=function(e){var n=e.target,a=n.name,s=n.value;t.setState(Object(w.a)({},a,s))},t}return Object(l.a)(n,[{key:"render",value:function(){console.log("this.props",this.props);var t=this.state,e=t.email,n=t.password;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Sign Up"}),Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(a.jsx)("label",{children:"email:"}),Object(a.jsx)("input",{type:"email",name:"email",value:e,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Password:"}),Object(a.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),Object(a.jsx)("input",{type:"submit",value:"Signup"})]}),Object(a.jsx)("p",{children:"Already have account?"}),Object(a.jsx)(i.b,{to:"/login",children:" Login"})]})}}]),n}(s.Component)),F=y(function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={email:"",password:""},t.handleFormSubmit=function(e){e.preventDefault();var n=t.state,a=n.email,s=n.password;t.props.login(a,s)},t.handleChange=function(e){var n=e.target,a=n.name,s=n.value;t.setState(Object(w.a)({},a,s))},t}return Object(l.a)(n,[{key:"render",value:function(){var t=this.state,e=t.email,n=t.password;return Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Login"}),Object(a.jsxs)("form",{onSubmit:this.handleFormSubmit,children:[Object(a.jsx)("label",{children:"email:"}),Object(a.jsx)("input",{type:"email",name:"email",value:e,onChange:this.handleChange}),Object(a.jsx)("label",{children:"Password:"}),Object(a.jsx)("input",{type:"password",name:"password",value:n,onChange:this.handleChange}),Object(a.jsx)("input",{type:"submit",value:"Login"})]}),Object(a.jsx)("p",{children:"Don't have account?"}),Object(a.jsx)(i.b,{to:"/signup",children:" Sign up"})]})}}]),n}(s.Component)),I=y(function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return console.log("this.props",this.props),Object(a.jsxs)("div",{children:[Object(a.jsx)("h1",{children:"Private Route"}),Object(a.jsxs)("h2",{children:["Welcome ",this.props.user&&this.props.user.email]})]})}}]),n}(s.Component)),P=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={text:t.props.text},t.handleInput=function(e){var n=e.target,a=n.name,s=n.value;console.log("name",a),console.log("value",s),t.setState(Object(w.a)({},a,s))},t}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)("form",{onSubmit:this.props.handleEditSubmit,children:[Object(a.jsx)("input",{value:this.state.text,name:"text",type:"text",onChange:this.handleInput}),Object(a.jsx)("button",{type:"submit",children:" submit changes "})]})})}}]),n}(s.Component),A=(n(63),y(function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){var t;Object(u.a)(this,n);for(var a=arguments.length,s=new Array(a),o=0;o<a;o++)s[o]=arguments[o];return(t=e.call.apply(e,[this].concat(s))).state={post:[],cText:"",editText:"",showForm:!0},t.getComments=function(){var e=t.props.match.params.id;m.a.get("".concat("https://yoursecretself.herokuapp.com","/api/post/").concat(e),{withCredentials:!0}).then((function(e){t.setState({post:e.data})})).catch((function(t){console.log(t)}))},t.deletePost=function(){var e=t.props.match.params.id;m.a.delete("".concat("https://yoursecretself.herokuapp.com","/api/post/").concat(e),{withCredentials:!0}).then((function(e){console.log("post deleted response",t.props),t.props.history.goBack()})).catch((function(t){console.log(t)}))},t.handleChange=function(e){var n=e.target,a=n.name,s=n.value;t.setState(Object(w.a)({},a,s)),console.log(e.target)},t.commentPost=function(){var e=t.props.match.params.id,n=t.state.cText;m.a.post("".concat("https://yoursecretself.herokuapp.com","/api/post/").concat(e,"/comment"),{cText:n},{withCredentials:!0}).then((function(){console.log("comments request sent"),t.setState({cText:""})})).catch((function(t){console.log(t)}))},t.toggleForm=function(){t.setState({showForm:!t.state.showForm})},t.handleEditSubmit=function(e){e.preventDefault();var n=t.props.match.params.id,a=e.target.querySelector("input").value;m.a.put("".concat("https://yoursecretself.herokuapp.com","/api/post/").concat(n),{text:a},{withCredentials:!0}).then((function(e){t.setState({post:e.data,showForm:!0})})).catch((function(t){console.log(t)}))},t}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getComments()}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"postDetails",children:[this.state.showForm?Object(a.jsxs)("h2",{style:{color:"rgb(106, 90, 205)"},children:[" ",this.state.post.text]}):Object(a.jsx)(P,{text:this.state.post.text,handleEditSubmit:this.handleEditSubmit,editText:this.state.editText}),Object(a.jsx)("div",{children:this.state.post.comments&&this.state.post.comments.map((function(t){return Object(a.jsx)("div",{children:Object(a.jsx)("h4",{style:{color:"rgb(255, 165, 0)"},children:t.cText})},t._id)}))}),this.props.user._id===this.state.post.user?Object(a.jsxs)("div",{className:"delEdit",children:[Object(a.jsx)("button",{className:"deleteButt",onClick:this.deletePost,children:"Delete post"}),Object(a.jsx)("button",{className:"buttComm",onClick:this.toggleForm,children:"edit post "})]}):null,Object(a.jsxs)("form",{className:"formComm",children:[Object(a.jsx)("textarea",{type:"text",placeholder:"Remember, be nice!",name:"cText",onChange:this.handleChange,value:this.state.cText}),Object(a.jsx)("button",{className:"buttComm",onClick:this.commentPost,children:" Comment "})]})]})}}]),n}(s.Component)));var D=y((function(t){var e=t.isLoggedIn,n=t.isLoading,s=t.component,o=t.exact,c=t.path;return n?"Loading":Object(a.jsx)(j.b,{exact:o,path:c,render:function(t){return e?Object(a.jsx)(j.a,{to:"/"}):e?void 0:Object(a.jsx)(s,Object(d.a)({},t))}})}));var T=y((function(t){var e=t.isLoggedIn,n=t.isLoading,s=t.component,o=t.exact,c=t.path;return n?"Loading":Object(a.jsx)(j.b,{exact:o,path:c,render:function(t){return e?e?Object(a.jsx)(s,Object(d.a)({},t)):void 0:Object(a.jsx)(j.a,{to:"/login"})}})})),B=function(t){Object(h.a)(n,t);var e=Object(p.a)(n);function n(){return Object(u.a)(this,n),e.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("div",{className:"container",children:[Object(a.jsx)(C,{}),Object(a.jsxs)(j.d,{children:[Object(a.jsx)(j.b,{exact:!0,path:"/",component:L}),Object(a.jsx)(j.b,{exact:!0,path:"/api/post/:id",component:A}),Object(a.jsx)(D,{exact:!0,path:"/signup",component:N}),Object(a.jsx)(D,{exact:!0,path:"/login",component:F}),Object(a.jsx)(T,{exact:!0,path:"/private",component:I})]}),Object(a.jsx)(S,{})]})}}]),n}(s.Component);r.a.render(Object(a.jsx)(i.a,{children:Object(a.jsx)(v,{children:Object(a.jsx)(B,{})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.4b688dee.chunk.js.map